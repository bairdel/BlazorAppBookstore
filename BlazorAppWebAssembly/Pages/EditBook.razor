@page "/book"
@using BlazorAppWebAssembly.Models
@inject NavigationManager NavigationManager


<PageTitle>New Book</PageTitle>
<h1>Book Catalog</h1>
<h3>New Book</h3>


<div class="row">
    <div class="col-sm-4"> 
        <EditForm Model="@book" OnValidSubmit="HandleSubmit">
            <DataAnnotationsValidator/>
            <ValidationSummary />
            <div class = "mb-3">
                <label for = "name" class = "form-label">Name:</label>
                <InputText id = "name" @bind-Value="@book.Name" class = "formcontrol"></InputText>
            </div>
            <div class = "mb-3">
                <label for = "genre" class = "form-label">Genre:</label>
                <InputSelect id = "genre" @bind-Value="@book.Genre" class = "form-select">
                    <option value="">Select Book</option>
                    <option value="Computer Science">Computer Science</option>
                    <option value="AI">AI</option>
                    <option value="Programming">Programming</option>
                    <option value="Data Science">Data Science</option>
                </InputSelect>
            </div>
            <div class = "mb-3">
                <label for = "price" class = "form-label">Price:</label>
                <InputNumber id = "price" @bind-Value="book.Price" class = "formcontrol"></InputNumber>
            </div>
            <div class = "mb-3">
                <label for = "publishDate" class = "form-label">Publish Date:</label>
                <InputDate id = "publishDate" @bind-Value="book.PublishDate" class = "formcontrol"></InputDate>
            </div>
            <button type="submit" class="btn btn-primary">Save</button>
            <button type="button" class="btn btn-secondary" @onclick="@Cancel">Cancel</button>

        </EditForm>
    </div>
</div>



@code {
    private Book book = new()
        { //on top include definition for this @using Models
            Name = string.Empty,
            Genre = string.Empty,
            PublishDate = DateTime.UtcNow

        };

    private void HandleSubmit()
    {
        BookClient.AddBook(book);
        NavigationManager.NavigateTo("/");
    }
    private void Cancel()
    {
        NavigationManager.NavigateTo("/");
    }
}
